<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.buaa.markpp.dao.FollowDao">
    <select id="countFans" parameterType="int" resultType="int">
        select coalesce(count(distinct follower_id), 0) from follow where author_id = #{accountId};
    </select>
    <select id="countFollows" parameterType="int" resultType="int">
        select coalesce(count(distinct author_id), 0) from follow where follower_id = #{accountId};
    </select>
    <select id="selectFolloweeIdsByFollowerId" resultType="int">
        select author_id from follow where follower_id = #{followerId} order by follower_id desc limit #{limit};
    </select>
    <insert id="add" useGeneratedKeys="true" keyProperty="followId" parameterType="Follow">
        insert into follow(author_id, follower_id) values (#{authorId}, #{followerId});
    </insert>
    <select id="selectByAuthorAndFollower" resultType="Follow">
        select * from follow where author_id = #{authorId} and follower_id = #{followerId};
    </select>
    <delete id="delete" parameterType="int">
        delete from follow where follow_id = #{followId};
    </delete>
</mapper>